var __webpack_modules__={"./src/js/cutter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cutter: () => (/* binding */ cutter)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store/actionCreators */ \"./src/js/store/actionCreators.js\");\n/* harmony import */ var _store_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store/store */ \"./src/js/store/store.js\");\n\r\n\r\n;\r\n\r\n\r\nfunction cutter(param) {\r\n  const startTime = new Date().getTime()\r\n\r\n  //region INPUT DATA\r\n  const data = {\r\n    name: 'name',\r\n    partName: 'part',\r\n    nameIsPrefix: false,\r\n    rotate: false,\r\n    cut: false,\r\n    showPartInName: true,\r\n    parts: [], //{name: '', length: 12, height: 500, count: 1, edge: 40, hem: 40} name - опционально\r\n    length: 3660,\r\n    height: 760,\r\n    step: 0.25,\r\n    minPart: 12,\r\n    maxStack: 1,\r\n    optimization: 2,\r\n    prepareOutputPlates: true, //c преобразованием выходных данных\r\n    getAllData: false, //получить все данные\r\n    axisX: true,\r\n    ...param\r\n  }\r\n  //endregion INPUT DATA\r\n\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.stateInitAC)() //state init\r\n\r\n  //region VALIDATION\r\n  let errors = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.validateConfigDataAC)(data)\r\n  if (errors.length) return errors\r\n  errors = null\r\n  //endregion VALIDATION\r\n\r\n  //region PREPARE DATA\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.prepareConfigDataAC)(data)\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.extractPartsAC)()\r\n\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.calcSizeAC)()\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.calcSizeStepAC)()\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.calcCountPartAC)()\r\n  //endregion PREPARE DATA\r\n\r\n  //region CALCULATE\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.createNewPlateAC)()\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.basicPositioningAC)()\r\n  if (!(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.isCutAC)()) { //если нельзя кроить детали то на всех листах установим правильный использщованный размер\r\n    for (let j = 0; j < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlatesLengthAC)(); j++) {\r\n      (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.setNewSizePlateAC)(j, (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getUnusedPartsOfPlateAC)(j))\r\n    }\r\n  } else { //пробуем делить детали, перед этим установим использованный размер на листах, кроме последнего, на максимальную\r\n    //уровень оптимизации\r\n    for (let i = 0; i < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getOptimizationLevelAC)(); i++) {\r\n      for (let j = 0; j < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlatesLengthAC)() - 1; j++) {\r\n        const size = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getCurrentSizeAC)()\r\n        if ((0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateSizeAC)(j) < size) {\r\n          (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.setNewSizePlateAC)(j, size)\r\n        }\r\n      }\r\n      (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.divisionOfProductsAC)()\r\n    }\r\n  }\r\n  //endregion CALCULATE\r\n\r\n  //region STATISTIC\r\n  let countOfParts = 0,\r\n    totalLength = 0,\r\n    countOfPlates = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlatesLengthAC)(),\r\n    countPartsInPlates = 0,\r\n    area = {element: 0, base: 0, hem: 0, edge: 0}, //площадь детали, основания и кромки с подгибом\r\n    perimeter = {element: 0, base: 0, hem: 0, edge: 0}\r\n\r\n  //total perimeter and area\r\n  ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().config.parts.forEach(part => {\r\n    const length = part.length * part.count,\r\n          count = part.count * 2\r\n\r\n    area.element += length * part.height\r\n    area.base += length * (part.height - part.hem - part.edge)\r\n    area.hem += length * part.hem\r\n    area.edge += length * part.edge\r\n\r\n    perimeter.element += (part.length + part.height) * count\r\n    perimeter.base += (part.length + (part.height - part.hem - part.edge)) * count\r\n    perimeter.hem += part.hem ? (part.length + part.hem) * count : 0\r\n    perimeter.edge += part.edge ? (part.length + part.edge) *count : 0\r\n  })\r\n\r\n  for (let plate = 0; plate < countOfPlates; plate++) {\r\n    const parts = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getUsedPartsAC)(plate)\r\n    countOfParts += parts\r\n    totalLength += parts * (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().sizeStep\r\n    countPartsInPlates += parts * (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().config.step\r\n\r\n    //add info perimeter and area for product item\r\n    for (let item = 0; item < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateItemsLengthAC)(plate); item++) {\r\n      const plateItem = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateItemAC)(plate, item)\r\n\r\n      ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.changeItemToPlateAC)(plate, item, {\r\n        area: {\r\n          product: {\r\n            element: plateItem.length * plateItem.height,\r\n            base: plateItem.length * (plateItem.height - plateItem.hem - plateItem.edge),\r\n            hem: plateItem.length * plateItem.hem,\r\n            edge: plateItem.length * plateItem.edge\r\n          },\r\n          part: {\r\n            element: plateItem.w * plateItem.h,\r\n            base: plateItem.w * (plateItem.h - plateItem.hem - plateItem.edge),\r\n            hem: plateItem.w * plateItem.hem,\r\n            edge: plateItem.w * plateItem.edge\r\n          }\r\n        },\r\n        perimeter: {\r\n          product: {\r\n            element: (plateItem.length + plateItem.height) * 2,\r\n            base: (plateItem.length + (plateItem.height - plateItem.hem - plateItem.edge)) * 2,\r\n            hem: plateItem.hem ? (plateItem.length + plateItem.hem) * 2 : 0,\r\n            edge: plateItem.edge ? (plateItem.length + plateItem.edge) * 2 : 0\r\n          },\r\n          part: {\r\n            element: (plateItem.w + plateItem.h) * 2,\r\n            base: (plateItem.w + (plateItem.h - plateItem.hem - plateItem.edge)) * 2,\r\n            hem: plateItem.hem ? (plateItem.w + plateItem.hem) * 2 : 0,\r\n            edge: plateItem.edge ? (plateItem.w + plateItem.edge) * 2 : 0\r\n          }\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.addStatisticAC)({\r\n    countOfParts,\r\n    totalLength,\r\n    countOfPlates,\r\n    countPartsInPlates,\r\n    perimeter,\r\n    area,\r\n    time: (new Date().getTime() - startTime) * 1e-3\r\n  })\r\n  //endregion STATISTIC\r\n\r\n  if ((0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getConfigDataAC)('prepareOutputPlates')) {\r\n    (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.removeNotNeededInPlateAC)()\r\n  }\r\n\r\n  if ((0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getConfigDataAC)('getAllData')) {\r\n    return (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)()\r\n  } else {\r\n    return {\r\n      config: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getConfigDataAC)(),\r\n      plates: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().plates,\r\n      statistic: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().statistic,\r\n      countPart: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().countPart,\r\n      mainSize: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().size,\r\n      errors: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().errors,\r\n      sizeStep: (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getStateAC)().sizeStep\r\n    }\r\n  }\r\n}\n\n//# sourceURL=webpack://cutting/./src/js/cutter.js?")},"./src/js/functions/basicPositioning.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ "./src/js/store/actionCreators.js");\n/* harmony import */ var _exceedingIterations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./exceedingIterations */ "./src/js/functions/exceedingIterations.js");\n\r\n\r\n\r\nfunction basicPositioning(isRotate, maxIteration, length, axisX) {\r\n  let countIteration = 0\r\n  while ((0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPartsLengthAC)()) {\r\n    let isFound = false\r\n    const fromPlate = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getCurrentIndexPlateAC)()\r\n\r\n    //текущая используемая длина на листе\r\n    const currLength = axisX ? (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.calcCurrentSizeAC)((0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getMaxX1AC)()) : length\r\n\r\n    //если превысили кратность то начинаем с самого маленького\r\n    if (currLength === length) (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.reverseUnusedSpaceAC)()\r\n\r\n    found: for (let unused = 0; unused < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getUnusedSpaceLengthAC)(); unused++) {\r\n      const currUnused = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getUnusedSpaceItemAC)(unused)\r\n      for (let rect = 0; rect < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPartsLengthAC)(); rect++) {\r\n        const curRect = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPartItemAC)(rect),\r\n          isHorizontal = curRect.w <= currUnused.w && curRect.h <= currUnused.h,\r\n          isVertical = curRect.w <= currUnused.h && curRect.h <= currUnused.w\r\n\r\n        if (isHorizontal || (isRotate && isVertical)) { //если найдено\r\n          const obj = {\r\n            ...curRect,\r\n            x: currUnused.x,\r\n            y: currUnused.y,\r\n            w: curRect.w,\r\n            h: curRect.h,\r\n            fromPlate\r\n          }\r\n\r\n          if (isRotate && isVertical && !obj.rotate) obj.rotate = true\r\n\r\n          ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.addItemToPlateAC)(fromPlate, obj)\r\n          ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.deletePartItemAC)(rect)\r\n          //обновляем неиспользуемые пространства\r\n          ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.findUnusedSpaceAC)()\r\n          isFound = true\r\n          countIteration = 0\r\n          break found\r\n        }\r\n      }\r\n\r\n      //если ничего не найдено, то создаем новый лист если находимся на последнем\r\n      //и только если текущий лист уже был использован\r\n      if (unused === (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getUnusedSpaceLengthAC)() - 1 && (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateItemsLengthAC)()) {\r\n        let isCreated = true\r\n        if (fromPlate === (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlatesLengthAC)() - 1 && (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPartsLengthAC)()) {\r\n          isCreated = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.createNewPlateAC)()\r\n        }\r\n        isCreated && !isFound && (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.nextIndexPlateAC)()\r\n      }\r\n    }\r\n\r\n    ++countIteration\r\n    if ((0,_exceedingIterations__WEBPACK_IMPORTED_MODULE_1__["default"])(countIteration, maxIteration)) break\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (basicPositioning);\n\n//# sourceURL=webpack://cutting/./src/js/functions/basicPositioning.js?')},"./src/js/functions/calcCurrentSize.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n//текущая используемая длина\r\nfunction calcCurrentSize(size, sizeStep, mode = 'floor') {\r\n  const modes = ['round', 'ceil', 'floor']\r\n  if (!modes.find(e => e === mode)) throw new Error('mode is error')\r\n\r\n  return Math[mode](size / sizeStep) * sizeStep\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (calcCurrentSize);\n\n//# sourceURL=webpack://cutting/./src/js/functions/calcCurrentSize.js?")},"./src/js/functions/createNewPlate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ \"./src/js/store/actionCreators.js\");\n//создать новый лист\r\n\r\n\r\nfunction createNewPlate(plates, size, length, height, startSpaceSymbol, unusedSpaceSymbol) {\r\n  let lastPlate = plates.length - 1, isCreated, newSize\r\n  const lastSize = plates[lastPlate]?.size || size\r\n\r\n  //если размер последнего листа равен общему размеру, то создаем новый лист\r\n  if (lastSize === size) {\r\n    const matrix = Array.from(Array(height), () => new Array(length).fill(unusedSpaceSymbol)),\r\n      newPlate = {\r\n        length, height, items: [], matrix, size,\r\n        unusedSpace: [{x: 0, y: 0, w: length, h: height}],\r\n        spaceSymbol: startSpaceSymbol\r\n      }\r\n\r\n    ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.pushNewPlateAC)(newPlate)\r\n    isCreated = true\r\n  } else { //иначе добавляем к размеру листа кратными частями\r\n    newSize = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.calcCurrentSizeAC)(lastSize,  'ceil')\r\n\r\n    if (newSize === lastSize && newSize < size) {\r\n      newSize = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.calcCurrentSizeAC)(lastSize + 1, 'ceil')\r\n    }\r\n\r\n    (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.setNewSizePlateAC)(lastPlate, newSize)\r\n    isCreated = false\r\n  }\r\n\r\n  return isCreated\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createNewPlate);\n\n//# sourceURL=webpack://cutting/./src/js/functions/createNewPlate.js?")},"./src/js/functions/decreaseSort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n//сортировка по убыванию\r\nfunction decreaseSort(arr, param = 'w') {\r\n  if (param) {\r\n    return arr.sort((a, b) => b[param] - a[param])\r\n  } else {\r\n    return arr.sort((a, b) => b - a)\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (decreaseSort);\n\n//# sourceURL=webpack://cutting/./src/js/functions/decreaseSort.js?")},"./src/js/functions/divider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   divider: () => (/* binding */ divider)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ "./src/js/store/actionCreators.js");\n/* harmony import */ var _decreaseSort__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./decreaseSort */ "./src/js/functions/decreaseSort.js");\n\r\n\r\n\r\nfunction divider(plates, minPart, rotate, maxStack, divideSymbol, items, length, unusedSpaceSymbol) {\r\n  const result = []\r\n  let unusedRectAll = null\r\n\r\n  for (const currRect of items) {\r\n    let maxPart, parts = false\r\n\r\n    //ищем свободные простанства\r\n    const findUnusedAll = () => {\r\n      unusedRectAll = []\r\n      for (let plate = 0; plate < plates.length; plate++) {\r\n        unusedRectAll.push(...(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.findUnusedSpaceAC)(plate, true))\r\n      }\r\n      filterUnused()\r\n    }\r\n\r\n    const filterUnused = () => {\r\n      unusedRectAll = (0,_decreaseSort__WEBPACK_IMPORTED_MODULE_1__["default"])(unusedRectAll.filter(space => {\r\n        if (space.h >= currRect.h && space.w >= minPart) {\r\n          return true\r\n        } else if (rotate && !space.rotate && space.w >= currRect.h && space.h >= minPart) {\r\n          [space.w, space.h] = [space.h, space.w]\r\n          space.rotate = true\r\n          return true\r\n        }\r\n        return false\r\n      }))\r\n      //фейковый последний элемент\r\n      unusedRectAll.push({w: 0})\r\n    }\r\n\r\n    const rectsToBack = (res) => {\r\n      res.forEach(e => (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.fillRectAC)({\r\n        x: e.x, w: e.w, y: e.y, h: e.h,\r\n        rotate: e.rotate,\r\n        value: unusedSpaceSymbol,\r\n        index: e.fromPlate\r\n      }))\r\n    }\r\n\r\n    //поиск оптимальных частей на которые можно разделить изделие\r\n    const findParts = (limit = Math.round(length / 2)) => {\r\n      let summ = 0, res = []\r\n\r\n      findUnusedAll()\r\n\r\n      if (res.length < maxPart) {\r\n        for (let i = 0; i < unusedRectAll.length - 1; i++) {\r\n          //если следующий элемент ближе к нужному размеру переходим к нему\r\n          if (summ + unusedRectAll[i + 1].w > currRect.w) {\r\n            continue\r\n          } else {\r\n            const current = unusedRectAll[i],\r\n              index = current.fromPlate\r\n\r\n            current.w = current.w > limit ? limit : current.w\r\n            summ += current.w\r\n\r\n            let w = current.w - (summ > currRect.w ? summ - currRect.w : 0),\r\n              h = currRect.h\r\n\r\n            if (w < minPart) { //если ширина меньше минимальной то из каждого предыдущего отрезка пытаемся взять по кусочку\r\n              for (let i = res.length - 1; i >= 0; i--) {\r\n                const newWidth = res[i].w - (minPart - w)\r\n                if (newWidth >= minPart) {\r\n                  res[i].w = newWidth\r\n                  w = minPart\r\n                  break\r\n                } else {\r\n                  w += res[i].w - minPart\r\n                  res[i].w = minPart\r\n                }\r\n                if (i === 0) return false //если невозможно возвращаем false\r\n              }\r\n            }\r\n\r\n            res.push({\r\n              ...currRect,\r\n              x: current.x,\r\n              y: current.y,\r\n              w,\r\n              h,\r\n              fromPlate: current.fromPlate,\r\n              rotate: current.rotate\r\n            })\r\n            ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.fillRectAC)({\r\n              x: current.x, w, y: current.y, h,\r\n              rotate: current.rotate, value: divideSymbol, index\r\n            })\r\n\r\n            for (let i = 0; i < unusedRectAll.length; i++) {\r\n              if (unusedRectAll[i].fromPlate === index) {\r\n                unusedRectAll.splice(i, 1)\r\n                i--\r\n              }\r\n            }\r\n            unusedRectAll.push(...(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.findUnusedSpaceAC)(index, true))\r\n            filterUnused()\r\n            i = -1\r\n          }\r\n\r\n          //прерываем если нашли сумму или превысили максимально количество стыков\r\n          if (summ >= currRect.w || res.length === maxPart) break\r\n        }\r\n      }\r\n\r\n      if (summ < currRect.w && limit < length) {//если не нашли нужную сумму с лимитом, то пробуем без него\r\n        rectsToBack(res)\r\n        return findParts(length)\r\n      } else if (summ < currRect.w) {//иначе если просто не нашли нужную сумму\r\n        return false\r\n      }\r\n\r\n      return res\r\n    }\r\n\r\n    //если объекты уже нельзя будет разделить то возможно они будут перемещены\r\n    maxPart = maxStack + 2 - currRect.parts\r\n\r\n    //повернутый элемент поворачиваем обратно\r\n    if (currRect && currRect.rotate) currRect.rotate = false\r\n\r\n    parts = findParts()\r\n\r\n    if (parts === false) {\r\n      rectsToBack(result)\r\n      return false\r\n    }\r\n\r\n    result.push(...parts)\r\n  }\r\n  return result\r\n}\r\n\r\n\n\n//# sourceURL=webpack://cutting/./src/js/functions/divider.js?')},"./src/js/functions/divisionOfProducts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ "./src/js/store/actionCreators.js");\n/* harmony import */ var _exceedingIterations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./exceedingIterations */ "./src/js/functions/exceedingIterations.js");\n/* harmony import */ var _updateInfoParts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./updateInfoParts */ "./src/js/functions/updateInfoParts.js");\n\r\n\r\n\r\n\r\nfunction divisionOfProducts(sizeStep, maxIteration, height, unusedSpaceSymbol, showPartInName) {\r\n  let dividedItems = null,\r\n    countIteration = 0,\r\n    lastPlateIndex = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlatesLengthAC)() - 1\r\n\r\n  while (lastPlateIndex >= 0) {\r\n    //если можно делить изделия и все уже было разложено\r\n    const parts = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.selectItemsOfLastPartAC)(lastPlateIndex)\r\n    if (parts.length) {\r\n      const uniqItems = parts.reduce((acc, el) => {\r\n          acc[el.id] = acc[el.id] ? {parts: el.parts, items: acc[el.id][\'items\'] + 1} : {parts: el.parts, items: 1}\r\n          return acc\r\n        }, {}),\r\n        comeBackItems = () => {\r\n        const size = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateSizeAC)(lastPlateIndex)\r\n          const cb = () => {\r\n            let x = size, y = 0, w = sizeStep, h = height\r\n            if (!(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getConfigDataAC)(\'axisX\')) [x, y, w, h] = [y, x, h, w]\r\n            ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.fillRectAC)({x, y, w, h, value: unusedSpaceSymbol, index: lastPlateIndex})\r\n            parts.forEach(item => (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.addItemToPlateAC)(lastPlateIndex, item))\r\n          }\r\n          ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.setNewSizePlateAC)(lastPlateIndex, size + sizeStep, cb)\r\n          lastPlateIndex--\r\n        },\r\n        putItems = () => {\r\n          dividedItems.forEach(part => {\r\n            (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.addItemToPlateAC)(part.fromPlate, part)\r\n            ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.findUnusedSpaceAC)(part.fromPlate)\r\n          })\r\n        }\r\n\r\n      dividedItems = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.dividerAC)(parts.map(e => ({...e})))\r\n\r\n      if (dividedItems === false) {\r\n        comeBackItems()\r\n      } else {\r\n        dividedItems = (0,_updateInfoParts__WEBPACK_IMPORTED_MODULE_2__["default"])(uniqItems, dividedItems, showPartInName)\r\n        putItems()\r\n      }\r\n      countIteration = 0\r\n\r\n      if (!(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateItemsLengthAC)(lastPlateIndex < 0 ? 0 : lastPlateIndex)) {\r\n        (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.deleteLastPlateAC)()\r\n        lastPlateIndex--\r\n      }\r\n    }\r\n\r\n    ++countIteration\r\n    if ((0,_exceedingIterations__WEBPACK_IMPORTED_MODULE_1__["default"])(countIteration, maxIteration)) break\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (divisionOfProducts);\n\n//# sourceURL=webpack://cutting/./src/js/functions/divisionOfProducts.js?')},"./src/js/functions/exceedingIterations.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n//превышение итераций\r\nfunction exceedingIterations(countIteration, maxIteration) {\r\n  if (countIteration > maxIteration) {\r\n    console.warn(`calculation aborted (iteration > ${maxIteration})`)\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (exceedingIterations);\n\n//# sourceURL=webpack://cutting/./src/js/functions/exceedingIterations.js?')},"./src/js/functions/extractParts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _rndID__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rndID */ "./src/js/functions/rndID.js");\n/* harmony import */ var _decreaseSort__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./decreaseSort */ "./src/js/functions/decreaseSort.js");\n\r\n\r\n\r\nfunction extractParts(parts, name, length, partName, nameIsPrefix, minPart) {\r\n  let result = [], tResult = []\r\n\r\n  //раскукоживаем\r\n  parts.forEach((rect, i) => {\r\n    for (let part = 1; part <= rect.count; part++) {\r\n      const baseName = rect.name\r\n          ? `${nameIsPrefix ? name : \'\'}${rect.name}`\r\n          : `${name} ${i + 1}-${part}`,\r\n        id = (0,_rndID__WEBPACK_IMPORTED_MODULE_0__["default"])(),\r\n        parts = Math.ceil(rect.length / (length)),\r\n        h = rect.height,\r\n        w = rect.length % length || length,\r\n        hem = rect.hem,\r\n        edge = rect.edge,\r\n        difference = w > 0 && w < minPart ? minPart - w : 0\r\n\r\n      for (let i = 0, part = 1; i < rect.length; i += length, part++) {\r\n        const width = part === 1 ? w + difference : part === 2 ? length - difference : length\r\n        tResult.push({...rect, name: baseName, w: width, h, id, part, parts, hem, edge, rotate: false})\r\n      }\r\n    }\r\n  })\r\n\r\n  //группировка одинаковых ширин\r\n  tResult = tResult.reduce((acc, el) => {\r\n    acc[el.w] = acc[el.w] ? [...acc[el.w], el] : [el]\r\n    return acc\r\n  }, {})\r\n\r\n  //сортировка по убыванию высоты в каждой группе ширины\r\n  Object.keys(tResult).forEach(item => tResult[item].length > 1 && (0,_decreaseSort__WEBPACK_IMPORTED_MODULE_1__["default"])(tResult[item], \'h\'))\r\n\r\n  //сортировка по убыванию ширины\r\n  ;(0,_decreaseSort__WEBPACK_IMPORTED_MODULE_1__["default"])(Object.keys(tResult), false).forEach(e => result.push(...tResult[e]))\r\n\r\n  return result\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (extractParts);\n\n//# sourceURL=webpack://cutting/./src/js/functions/extractParts.js?')},"./src/js/functions/findUnusedSpace.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ "./src/js/store/actionCreators.js");\n/* harmony import */ var _decreaseSort__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./decreaseSort */ "./src/js/functions/decreaseSort.js");\n//поиск неиспользованного пространства\r\n\r\n\r\n\r\nfunction findUnusedSpace(minPart, plates, axisX, symbols, index = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getCurrentIndexPlateAC)(), divideMode = false) {\r\n  const currLength = axisX ? plates[index].size : plates[index].length, res = [],\r\n        currHeight = axisX ? plates[index].height : plates[index].size,\r\n        arr = plates[index].matrix,\r\n        spaceSymbol = plates[index].spaceSymbol === symbols.startSpace ? symbols.alternateSpace : symbols.startSpace,\r\n        divideSymbol = divideMode ? symbols.divide : symbols.rect,\r\n        //идем с шагом minPart - 1. в разы больше производительность и мы не пропустим отрезки с этим шагом\r\n        step = minPart - 1 > 0 ? minPart - 1 : 1\r\n\r\n  plates[index].spaceSymbol = spaceSymbol\r\n\r\n  const conditionFind = (x, y) => arr[x][y] === symbols.rect || arr[x][y] === divideSymbol\r\n  const findIndex = (arr, x, y, step) => {\r\n    let s = step\r\n    while (s > 1) {\r\n      s = Math.ceil(s / 2)\r\n      if (arr[x] !== arr[x - 1]) return x\r\n      else if (conditionFind(y, x) || arr[x] !== arr[x + 1]) x += s\r\n      else x -= s\r\n    }\r\n    return x\r\n  }\r\n  const findEndY = (startX, startY) => {\r\n    let h = 0, topY = 0\r\n    for (let y = startY; y < currHeight; y++/* += step*/) {\r\n      if (conditionFind(y, startX)) break\r\n      h++\r\n    }\r\n    for (let y = startY - 1; y >= 0; y--/* -= step*/) {\r\n      if (conditionFind(y, startX)) break\r\n      topY++\r\n      h++\r\n    }\r\n    return {h, y: topY}\r\n  }\r\n  //можно попробовать оптимизировать через findIndex\r\n  const findEndX = (startX, startY, topY) => {\r\n    let w = 0, leftX = 0\r\n    for (let x = startX; x < currLength; x++) {\r\n      if (conditionFind(startY, x) || conditionFind(startY - topY, x)) break\r\n      w++\r\n    }\r\n    // после тестов будет понятно нужен ли этот кусочек. он меняет правила игры в поиске незанятого пространства\r\n    // если нужно тогда можно и в основном цикле поиска по y добавить +step\r\n    // for (let x = startX - 1; x >= 0; x--) {\r\n    //   if (conditionFind(startY, x) || conditionFind(startY - topY, x)) break\r\n    //   leftX++\r\n    //   w++\r\n    // }\r\n    return {w, x: leftX}\r\n  }\r\n\r\n  //ищем не занятое пространство\r\n  for (let y = 0; y < currHeight; y++) {\r\n    for (let x = 0; x < currLength; x += step) {\r\n      if (arr[y][x] !== symbols.rect && arr[y][x] !== spaceSymbol && arr[y][x] !== divideSymbol) {\r\n        x = findIndex(arr[y], x, y, step)\r\n        const {h, y: topY} = findEndY(x, y),\r\n          {w, x: leftX} = findEndX(x, y, topY)\r\n        ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.fillRectAC)({x: x - leftX, w, y: y - topY, h, index, value: spaceSymbol})\r\n        res.push({x: x - leftX, y: y - topY, w, h, fromPlate: index})\r\n        x = x + w\r\n      }\r\n    }\r\n  }\r\n\r\n  return divideMode ? res : (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.setNewUnusedSpaceAC)(index, (0,_decreaseSort__WEBPACK_IMPORTED_MODULE_1__["default"])(res))\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (findUnusedSpace);\n\n//# sourceURL=webpack://cutting/./src/js/functions/findUnusedSpace.js?')},"./src/js/functions/prepareConfig.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction prepareConfig(data) {\r\n  return {\r\n    name: data.name.toString(),\r\n    partName: data.partName.toString(),\r\n    length: +data.length,\r\n    height: +data.height,\r\n    step: +data.step,\r\n    minPart: +data.minPart,\r\n    maxStack: +data.maxStack,\r\n    optimization: +data.optimization,\r\n    parts: data.parts.map(e => ({\r\n      ...e,\r\n      name: e.name,\r\n      length: +e.length,\r\n      height: +e.height + +e.hem + +e.edge,\r\n      count: +e.count,\r\n      hem: +e.hem,\r\n      edge: +e.edge,\r\n    })),\r\n    nameIsPrefix: data.nameIsPrefix,\r\n    rotate: data.rotate,\r\n    cut: data.cut,\r\n    showPartInName: data.showPartInName,\r\n    getAllData: data.getAllData,\r\n    prepareOutputPlates: data.prepareOutputPlates,\r\n    axisX: data.axisX\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prepareConfig);\n\n//# sourceURL=webpack://cutting/./src/js/functions/prepareConfig.js?')},"./src/js/functions/rndID.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n//случайный id\r\nfunction rndID(length = 8) {\r\n  return Math.random().toString(36).substr(2, length)\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (rndID);\n\n//# sourceURL=webpack://cutting/./src/js/functions/rndID.js?')},"./src/js/functions/selectItemsOfLastPart.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ "./src/js/store/actionCreators.js");\n//выделить из последнего листа элменты из его части\r\n\r\n\r\nfunction selectItemsOfLastPart(size, sizeStep, countPart, index, axisX) {\r\n  let emptyParts = 0\r\n  const res = []\r\n\r\n  for (let step = size - sizeStep, num = countPart - 1; step >= 0; step -= sizeStep, num--) {\r\n    for (let item = 0; item < (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateItemsLengthAC)(index); item++) {\r\n      const el = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.getPlateItemAC)(index, item),\r\n        value = (el.rotate && axisX) || (!el.rotate && !axisX) ? el.h : el.w,\r\n        coord = axisX ? el.x : el.y\r\n\r\n      if (coord + value > step) {\r\n        res.push({...el})\r\n        ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.fillRectAC)({x: el.x, w: el.w, y: el.y, h: el.h, rotate: el.rotate, value: 0, index})\r\n        ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.deletePlateItemAC)(index, item)\r\n        item--\r\n      }\r\n    }\r\n    if (res.length) break\r\n    else emptyParts++\r\n  }\r\n\r\n  (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.setNewSizePlateAC)(index, size - (sizeStep * ++emptyParts))\r\n\r\n  return res.length ? res : false\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (selectItemsOfLastPart);\n\n//# sourceURL=webpack://cutting/./src/js/functions/selectItemsOfLastPart.js?')},"./src/js/functions/updateInfoParts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store_actionCreators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actionCreators */ "./src/js/store/actionCreators.js");\n\r\n\r\nfunction updateInfoParts(uniqItems, dividedItems, showPartInName) {\r\n  Object.keys(uniqItems).forEach(itemId => {\r\n    const partsFilter = dividedItems.filter(part => part.id === itemId),\r\n          parts = uniqItems[itemId].parts - uniqItems[itemId].items  + partsFilter.length\r\n    let count = 0\r\n    console.log(uniqItems)\r\n    partsFilter.forEach(part => {\r\n      part.part = ++count\r\n      part.parts = parts\r\n      showPartInName && (part.name = (0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.updatePartNameAC)(part))\r\n    })\r\n    ;(0,_store_actionCreators__WEBPACK_IMPORTED_MODULE_0__.updatePartsInfoInPlateAC)(itemId, count, parts)\r\n  })\r\n  return dividedItems\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (updateInfoParts);\n\n//# sourceURL=webpack://cutting/./src/js/functions/updateInfoParts.js?')},"./src/js/functions/updatePartName.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n//обновить имя изделия\r\nfunction updatePartName(partName, partItemOrName, part = false) {\r\n  if (typeof partItemOrName === 'string' && part === false) {\r\n    console.warn('props error')\r\n    return\r\n  }\r\n\r\n  const name = typeof partItemOrName === 'string' ? partItemOrName : partItemOrName.name,\r\n    regExp = new RegExp(`${partName}.+$`)\r\n\r\n  partName = `${partName} ${part === false ? partItemOrName.part : part}`\r\n\r\n  return regExp.test(name) ? name.replace(regExp, partName) : `${name} ${partName}`\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (updatePartName);\n\n//# sourceURL=webpack://cutting/./src/js/functions/updatePartName.js?")},"./src/js/functions/validation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction validation(data) {\r\n  const errors = []\r\n\r\n  if ([\r\n    data.length,\r\n    data.height,\r\n    data.minPart\r\n  ].some(e => !Number.isInteger(e) || e <= 0)) {\r\n    errors.push(`Element is not integer`)\r\n  }\r\n  if (data.maxStack < 0 || !Number.isInteger(data.maxStack)) {\r\n    errors.push(`Max Stack is not valid`)\r\n  }\r\n  if (data.optimization < 0 || !Number.isInteger(data.optimization) || data.optimization > 10) {\r\n    errors.push(`Optimization level is not valid`)\r\n  }\r\n  if (data.parts.filter(e => (\r\n      e.length === undefined  || e.height === undefined || e.count === undefined || e.hem === undefined || e.edge === undefined ||\r\n      !Number.isInteger(e.length) || !Number.isInteger(e.height) || !Number.isInteger(e.count) || !Number.isInteger(e.hem) || !Number.isInteger(e.edge) ||\r\n      e.length <= 0 || e.height <= 0 || e.count <= 0 || e.hem < 0 || e.edge < 0\r\n    )\r\n  ).length) {\r\n    errors.push(`Parts is not valid`)\r\n  }\r\n\r\n  const notValidElements = data.parts.filter(part => {\r\n    return part.length > data.length * (data.maxStack + 1)\r\n      || part.height > data.height - part.hem - part.edge\r\n      || part.length < data.minPart\r\n      || part.height < data.minPart\r\n  })\r\n  if (notValidElements.length) {\r\n    errors.push(`Parts is not valid (diapason)`)\r\n  }\r\n  const steps = [0.1, 0.2, 0.25, 0.5, 1]\r\n  if (Number.isNaN(data.step) || !steps.find(e => e === data.step)) {\r\n    errors.push(`Step is not valid`)\r\n  }\r\n  if (data.nameIsPrefix !== true && data.nameIsPrefix !== false) {\r\n    errors.push(`nameIsPrefix is not bool`)\r\n  }\r\n  if (data.rotate !== true && data.rotate !== false) {\r\n    errors.push(`rotate is not bool`)\r\n  }\r\n  if (data.cut !== true && data.cut !== false) {\r\n    errors.push(`cut is not bool`)\r\n  }\r\n  if (data.showPartInName !== true && data.showPartInName !== false) {\r\n    errors.push(`showPartInName is not bool`)\r\n  }\r\n  if (data.getAllData !== true && data.getAllData !== false) {\r\n    errors.push(`getAllData is not bool`)\r\n  }\r\n  if (data.prepareOutputPlates !== true && data.prepareOutputPlates !== false) {\r\n    errors.push(`prepareOutputPlates is not bool`)\r\n  }\r\n  if (data.axisX !== true && data.axisX !== false) {\r\n    errors.push(`axisX is not bool`)\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validation);\n\n//# sourceURL=webpack://cutting/./src/js/functions/validation.js?')},"./src/js/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _cutter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cutter */ \"./src/js/cutter.js\");\n\r\n\r\n;\r\n\r\nfunction calc(e) {\r\n  e && e.preventDefault()\r\n\r\n  const graph = document.querySelector('#graph')\r\n  graph.innerHTML = ''\r\n\r\n  const form = new FormData(document.querySelector('#form'))\r\n  let data = {}, parts = []\r\n\r\n  for (let i of form) {\r\n    data[i[0]] = !isNaN(i[1]) && i[1] !== '' ? +i[1] : i[1]\r\n  }\r\n\r\n  for (let i = 1; i <= 10; i++) {\r\n    if (data[`length${i}`] === '' || data[`height${i}`] === '' || data[`count${i}`] === '') continue\r\n    const obj = {\r\n      length: data[`length${i}`],\r\n      height: data[`height${i}`],\r\n      count: data[`count${i}`],\r\n      color: data[`color${i}`],\r\n      hem: data[`hem${i}`],\r\n      edge: data[`edge${i}`],\r\n    }\r\n\r\n    if (data[`name${i}`] !== '') obj.name = data[`name${i}`]\r\n    parts.push(obj)\r\n  }\r\n\r\n  data.parts = parts\r\n  data.nameIsPrefix = !!data.nameIsPrefix\r\n  data.rotate = !!data.rotate\r\n  data.cut = !!data.cut\r\n  data.axisX = !!data.axisX\r\n  data.getAllData = true //для дебага\r\n  data.prepareOutputPlates = false //для дебага\r\n\r\n  const cut = (0,_cutter__WEBPACK_IMPORTED_MODULE_0__.cutter)(data),\r\n    errorsBlock = document.querySelector('#errors')\r\n\r\n  document.querySelector('#time').innerText = `${cut.statistic.time} cек. ${cut.statistic.countOfParts} частей. ${cut.statistic.countOfPlates} листов. ${cut.statistic.countPartsInPlates} л/ч.  ${cut.statistic.totalLength}мм общая длина.`\r\n  errorsBlock.innerHTML = ''\r\n\r\n  if (cut.errors.length) {\r\n    cut.errors.forEach((e, i) => {\r\n      errorsBlock.innerHTML += `<div>${i}. ${e}</div>`\r\n    })\r\n  } else {\r\n    draw(cut)\r\n  }\r\n}\r\n\r\nfunction draw(cut, mode = 'items') {\r\n  graph.innerHTML = ''\r\n  const length = cut.config.length,\r\n        height = cut.config.height,\r\n        axisX = cut.config.axisX\r\n\r\n\r\n  cut.plates.forEach(items => {\r\n    const canvas = document.createElement('canvas'),\r\n          div = document.createElement('div')\r\n\r\n    div.classList.add('plate')\r\n\r\n    canvas.setAttribute('width', `${length}`)\r\n    canvas.setAttribute('height', `${height}`)\r\n\r\n    const ctx = canvas.getContext('2d')\r\n\r\n    ctx.strokeRect(0, 0, canvas.width, canvas.height)\r\n    items[mode].forEach(e => {\r\n      const edge = mode === 'items' ? e.edge : 0,\r\n            hem = mode === 'items' ? e.hem : 0,\r\n            eh = edge + hem\r\n\r\n      let w = e.w, h = e.h, x = e.x, y = e.y\r\n      if (e.rotate) [w, h] = [h, w]\r\n      ctx.fillStyle = e.color || 'LightSeaGreen'\r\n      ctx.fillRect(x, y, w, h)\r\n      ctx.fillStyle = '#000'\r\n      ctx.font = '22px Verdana'\r\n      if (e.rotate) {\r\n        ctx.rotate(-Math.PI / 2)\r\n        ctx.fillText(`${e.name} (${h}x${w}+${edge}+${hem} мм ${e.parts})`, -y - h + 10, x + 25)\r\n        ctx.rotate(Math.PI / 2)\r\n        //кромка\r\n        ctx.fillStyle = 'MediumAquamarine'\r\n        ctx.fillRect(x + w - eh, y, edge, h)\r\n        //подгиб\r\n        ctx.fillStyle = 'DarkSeaGreen'\r\n        ctx.fillRect(x + w - hem, y, hem, h)\r\n        ctx.strokeRect(x, y, w, h)\r\n      } else if (mode === 'items') {\r\n        ctx.fillText(`${e.name} (${w}x${h}+${edge}+${hem} мм ${e.parts})`, x + 10, y + 25)\r\n        //кромка\r\n        ctx.fillStyle = 'MediumAquamarine'\r\n        ctx.fillRect(x, y + h - eh, w, edge)\r\n        //подгиб\r\n        ctx.fillStyle = 'DarkSeaGreen'\r\n        ctx.fillRect(x, y + h - hem, w, hem)\r\n        ctx.strokeRect(x, y, w, h)\r\n      }\r\n    })\r\n\r\n    ctx.strokeStyle = 'red'\r\n    ctx.beginPath();\r\n    ctx.setLineDash([30, 10]);\r\n    if (axisX) {\r\n      const size = Math.round(length / 4)\r\n\r\n      ctx.moveTo(size, 0);\r\n      ctx.lineTo(size, height);\r\n      ctx.moveTo(size * 2, 0);\r\n      ctx.lineTo(size * 2, height);\r\n      ctx.moveTo(size * 3, 0);\r\n      ctx.lineTo(size * 3, height);\r\n    } else {\r\n      const size = Math.round(height / 2)\r\n\r\n      ctx.moveTo(0, size);\r\n      ctx.lineTo(length, size);\r\n    }\r\n    ctx.stroke();\r\n    ctx.strokeStyle = 'black'\r\n    ctx.setLineDash([]);\r\n\r\n    div.append(canvas)\r\n    graph.append(div)\r\n  })\r\n}\r\n\r\nfunction drawMatrix(cut) {\r\n  graph.innerHTML = ''\r\n  const length = cut.config.length,\r\n    height = cut.config.height\r\n\r\n  cut.plates.forEach(items => {\r\n    const canvas = document.createElement('canvas'),\r\n      div = document.createElement('div')\r\n    div.classList.add('plate')\r\n\r\n    canvas.setAttribute('width', `${length}`)\r\n    canvas.setAttribute('height', `${height}`)\r\n\r\n    const ctx = canvas.getContext('2d')\r\n\r\n    ctx.strokeRect(0, 0, canvas.width, canvas.height)\r\n    ctx.fillStyle = 'LimeGreen'\r\n    for (let x = 0; x < items.matrix.length; x++) {\r\n      for (let y = 0; y < items.matrix[x].length; y++) {\r\n        items.matrix[x][y] !== 1 && items.matrix[x][y] !== 4 && ctx.fillRect(y, x, 1, 1)\r\n      }\r\n    }\r\n    div.append(canvas)\r\n    graph.append(div)\r\n})\r\n}\r\n\r\nfunction drawUnusedAll(cut) {\r\n  graph.innerHTML = ''\r\n  const length = cut.config.length,\r\n    height = cut.config.height\r\n\r\n  for (let item = 0; item < cut.plates.length; item++) {\r\n    const canvas = document.createElement('canvas'),\r\n      div = document.createElement('div')\r\n    div.classList.add('plate')\r\n\r\n    canvas.setAttribute('width', `${length}`)\r\n    canvas.setAttribute('height', `${height}`)\r\n\r\n    const ctx = canvas.getContext('2d')\r\n\r\n    ctx.strokeRect(0, 0, canvas.width, canvas.height)\r\n    cut.unusedRectAll.filter(e => e.fromPlate === item).forEach(items => {\r\n      ctx.fillStyle = 'Aqua'\r\n      ctx.fillRect(items.x, items.y, items.w, items.h)\r\n    })\r\n\r\n    div.append(canvas)\r\n    graph.append(div)\r\n  }\r\n}\r\n\r\nwindow.draw = draw\r\nwindow.drawMatrix = drawMatrix\r\nwindow.drawUnusedAll = drawUnusedAll\r\n\r\ndocument.querySelector('#calc').addEventListener('click', e => calc(e))\r\n\r\n\n\n//# sourceURL=webpack://cutting/./src/js/index.js?")},"./src/js/store/actionCreators.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addItemToPlateAC: () => (/* binding */ addItemToPlateAC),\n/* harmony export */   addStatisticAC: () => (/* binding */ addStatisticAC),\n/* harmony export */   basicPositioningAC: () => (/* binding */ basicPositioningAC),\n/* harmony export */   calcCountPartAC: () => (/* binding */ calcCountPartAC),\n/* harmony export */   calcCurrentSizeAC: () => (/* binding */ calcCurrentSizeAC),\n/* harmony export */   calcSizeAC: () => (/* binding */ calcSizeAC),\n/* harmony export */   calcSizeStepAC: () => (/* binding */ calcSizeStepAC),\n/* harmony export */   changeItemToPlateAC: () => (/* binding */ changeItemToPlateAC),\n/* harmony export */   createNewPlateAC: () => (/* binding */ createNewPlateAC),\n/* harmony export */   deleteLastPlateAC: () => (/* binding */ deleteLastPlateAC),\n/* harmony export */   deletePartItemAC: () => (/* binding */ deletePartItemAC),\n/* harmony export */   deletePlateItemAC: () => (/* binding */ deletePlateItemAC),\n/* harmony export */   dividerAC: () => (/* binding */ dividerAC),\n/* harmony export */   divisionOfProductsAC: () => (/* binding */ divisionOfProductsAC),\n/* harmony export */   extractPartsAC: () => (/* binding */ extractPartsAC),\n/* harmony export */   fillRectAC: () => (/* binding */ fillRectAC),\n/* harmony export */   findUnusedSpaceAC: () => (/* binding */ findUnusedSpaceAC),\n/* harmony export */   getConfigDataAC: () => (/* binding */ getConfigDataAC),\n/* harmony export */   getCurrentIndexPlateAC: () => (/* binding */ getCurrentIndexPlateAC),\n/* harmony export */   getCurrentSizeAC: () => (/* binding */ getCurrentSizeAC),\n/* harmony export */   getMaxX1AC: () => (/* binding */ getMaxX1AC),\n/* harmony export */   getOptimizationLevelAC: () => (/* binding */ getOptimizationLevelAC),\n/* harmony export */   getPartItemAC: () => (/* binding */ getPartItemAC),\n/* harmony export */   getPartsLengthAC: () => (/* binding */ getPartsLengthAC),\n/* harmony export */   getPlateItemAC: () => (/* binding */ getPlateItemAC),\n/* harmony export */   getPlateItemsLengthAC: () => (/* binding */ getPlateItemsLengthAC),\n/* harmony export */   getPlateSizeAC: () => (/* binding */ getPlateSizeAC),\n/* harmony export */   getPlatesLengthAC: () => (/* binding */ getPlatesLengthAC),\n/* harmony export */   getStateAC: () => (/* binding */ getStateAC),\n/* harmony export */   getUnusedPartsOfPlateAC: () => (/* binding */ getUnusedPartsOfPlateAC),\n/* harmony export */   getUnusedSpaceItemAC: () => (/* binding */ getUnusedSpaceItemAC),\n/* harmony export */   getUnusedSpaceLengthAC: () => (/* binding */ getUnusedSpaceLengthAC),\n/* harmony export */   getUsedPartsAC: () => (/* binding */ getUsedPartsAC),\n/* harmony export */   isCutAC: () => (/* binding */ isCutAC),\n/* harmony export */   nextIndexPlateAC: () => (/* binding */ nextIndexPlateAC),\n/* harmony export */   prepareConfigDataAC: () => (/* binding */ prepareConfigDataAC),\n/* harmony export */   pushNewPlateAC: () => (/* binding */ pushNewPlateAC),\n/* harmony export */   removeNotNeededInPlateAC: () => (/* binding */ removeNotNeededInPlateAC),\n/* harmony export */   reverseUnusedSpaceAC: () => (/* binding */ reverseUnusedSpaceAC),\n/* harmony export */   selectItemsOfLastPartAC: () => (/* binding */ selectItemsOfLastPartAC),\n/* harmony export */   setNewSizePlateAC: () => (/* binding */ setNewSizePlateAC),\n/* harmony export */   setNewUnusedSpaceAC: () => (/* binding */ setNewUnusedSpaceAC),\n/* harmony export */   stateInitAC: () => (/* binding */ stateInitAC),\n/* harmony export */   updatePartNameAC: () => (/* binding */ updatePartNameAC),\n/* harmony export */   updatePartsInfoInPlateAC: () => (/* binding */ updatePartsInfoInPlateAC),\n/* harmony export */   validateConfigDataAC: () => (/* binding */ validateConfigDataAC)\n/* harmony export */ });\n/* harmony import */ var _dispatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dispatch */ "./src/js/store/dispatch.js");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions */ "./src/js/store/actions.js");\n\r\n\r\n\r\n//region PREPARE DATA\r\nconst stateInitAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.INITIAL_STATE})\r\nconst getStateAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_STATE})\r\nconst validateConfigDataAC = (config) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.VALIDATE_CONFIG_DATA, config})\r\nconst prepareConfigDataAC = (config) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.PREPARE_CONFIG_DATA, config})\r\nconst extractPartsAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.EXTRACT_PARTS})\r\nconst calcSizeAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_SIZE})\r\nconst calcSizeStepAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_SIZE_STEP})\r\nconst calcCountPartAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_COUNT_PART})\r\n//endregion PREPARE DATA\r\n\r\n//region CALCULATION\r\nconst getCurrentIndexPlateAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_CURRENT_INDEX_PLATE})\r\nconst nextIndexPlateAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.NEXT_INDEX_PLATE})\r\nconst createNewPlateAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.CREATE_NEW_PLATE})\r\nconst pushNewPlateAC = (plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.PUSH_NEW_PLATE, plate})\r\nconst setNewSizePlateAC = (plate, size, cb = () => {}) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.SET_NEW_SIZE_PLATE, plate, size, cb})\r\nconst addItemToPlateAC = (plateIdx, item) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.ADD_ITEM_TO_PLATE, plateIdx, item})\r\nconst changeItemToPlateAC = (plateIdx, item, data) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.CHANGE_ITEM_TO_PLATE, plateIdx, item, data})\r\nconst deletePlateItemAC = (plateIdx, itemIdx) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.DELETE_PLATE_ITEM, plateIdx, itemIdx})\r\nconst getPlateItemsLengthAC = (plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATE_ITEMS_LENGTH, plate})\r\nconst getPlatesLengthAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATES_LENGTH})\r\nconst getPlateItemAC = (plateIdx, itemIdx) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATE_ITEM, plateIdx, itemIdx})\r\nconst getPlateSizeAC = (plateIdx) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATE_SIZE, plateIdx})\r\nconst calcCurrentSizeAC = (size, mode) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_CURRENT_SIZE, size, mode})\r\nconst findUnusedSpaceAC = (index, divideMode) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.FIND_UNUSED_SPACE, index, divideMode})\r\nconst isCutAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.IS_CUT})\r\nconst getPartsLengthAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PARTS_LENGTH})\r\nconst getMaxX1AC = (plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_MAX_X1, plate})\r\nconst reverseUnusedSpaceAC = (plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.REVERSE_UNUSED_SPACE, plate})\r\nconst getUnusedSpaceLengthAC = (plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_UNUSED_SPACE_LENGTH, plate})\r\nconst getUnusedSpaceItemAC = (item, plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_UNUSED_SPACE_ITEM, plate, item})\r\nconst getPartItemAC = (item) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PART_ITEM, item})\r\nconst fillRectAC = (param) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.FILL_RECT, param})\r\nconst deletePartItemAC = (index) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.DELETE_PART_ITEM, index})\r\nconst setNewUnusedSpaceAC = (plate, value) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.SET_NEW_UNUSED_SPACE, plate, value})\r\nconst selectItemsOfLastPartAC = (index) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.SELECT_ITEMS_OF_LAST_PART, index})\r\nconst updatePartNameAC = (partItemOrName, part) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.UPDATE_PART_NAME, partItemOrName, part})\r\nconst updatePartsInfoInPlateAC = (id, startPart, parts) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.UPDATE_PARTS_INFO_IN_PLATE, id, startPart, parts})\r\nconst deleteLastPlateAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.DELETE_LAST_PLATE})\r\nconst dividerAC = (items) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.DIVIDER, items})\r\nconst divisionOfProductsAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.DIVISION_OF_PRODUCTS})\r\nconst basicPositioningAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.BASIC_POSITIONING})\r\nconst getOptimizationLevelAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_OPTIMIZATION_LEVEL})\r\nconst addStatisticAC = (obj) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.ADD_STATISTIC, obj})\r\nconst getConfigDataAC = (key) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_CONFIG_DATA, key})\r\nconst getCurrentSizeAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_CURRENT_SIZE})\r\nconst getUsedPartsAC = (plate) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_USED_PARTS, plate})\r\nconst removeNotNeededInPlateAC = () => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.REMOVE_NOT_NEEDED_IN_PLATE})\r\nconst getUnusedPartsOfPlateAC = (plateIndex) => (0,_dispatch__WEBPACK_IMPORTED_MODULE_0__["default"])({type: _actions__WEBPACK_IMPORTED_MODULE_1__.GET_UNUSED_PARTS_OF_PLATE, plateIndex})\r\n//endregion CALCULATION\n\n//# sourceURL=webpack://cutting/./src/js/store/actionCreators.js?')},"./src/js/store/actions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADD_ITEM_TO_PLATE: () => (/* binding */ ADD_ITEM_TO_PLATE),\n/* harmony export */   ADD_STATISTIC: () => (/* binding */ ADD_STATISTIC),\n/* harmony export */   BASIC_POSITIONING: () => (/* binding */ BASIC_POSITIONING),\n/* harmony export */   CALC_COUNT_PART: () => (/* binding */ CALC_COUNT_PART),\n/* harmony export */   CALC_CURRENT_SIZE: () => (/* binding */ CALC_CURRENT_SIZE),\n/* harmony export */   CALC_SIZE: () => (/* binding */ CALC_SIZE),\n/* harmony export */   CALC_SIZE_STEP: () => (/* binding */ CALC_SIZE_STEP),\n/* harmony export */   CHANGE_ITEM_TO_PLATE: () => (/* binding */ CHANGE_ITEM_TO_PLATE),\n/* harmony export */   CREATE_NEW_PLATE: () => (/* binding */ CREATE_NEW_PLATE),\n/* harmony export */   DELETE_LAST_PLATE: () => (/* binding */ DELETE_LAST_PLATE),\n/* harmony export */   DELETE_PART_ITEM: () => (/* binding */ DELETE_PART_ITEM),\n/* harmony export */   DELETE_PLATE_ITEM: () => (/* binding */ DELETE_PLATE_ITEM),\n/* harmony export */   DIVIDER: () => (/* binding */ DIVIDER),\n/* harmony export */   DIVISION_OF_PRODUCTS: () => (/* binding */ DIVISION_OF_PRODUCTS),\n/* harmony export */   EXTRACT_PARTS: () => (/* binding */ EXTRACT_PARTS),\n/* harmony export */   FILL_RECT: () => (/* binding */ FILL_RECT),\n/* harmony export */   FIND_UNUSED_SPACE: () => (/* binding */ FIND_UNUSED_SPACE),\n/* harmony export */   GET_CONFIG_DATA: () => (/* binding */ GET_CONFIG_DATA),\n/* harmony export */   GET_CURRENT_INDEX_PLATE: () => (/* binding */ GET_CURRENT_INDEX_PLATE),\n/* harmony export */   GET_CURRENT_SIZE: () => (/* binding */ GET_CURRENT_SIZE),\n/* harmony export */   GET_MAX_X1: () => (/* binding */ GET_MAX_X1),\n/* harmony export */   GET_OPTIMIZATION_LEVEL: () => (/* binding */ GET_OPTIMIZATION_LEVEL),\n/* harmony export */   GET_PARTS_LENGTH: () => (/* binding */ GET_PARTS_LENGTH),\n/* harmony export */   GET_PART_ITEM: () => (/* binding */ GET_PART_ITEM),\n/* harmony export */   GET_PLATES_LENGTH: () => (/* binding */ GET_PLATES_LENGTH),\n/* harmony export */   GET_PLATE_ITEM: () => (/* binding */ GET_PLATE_ITEM),\n/* harmony export */   GET_PLATE_ITEMS_LENGTH: () => (/* binding */ GET_PLATE_ITEMS_LENGTH),\n/* harmony export */   GET_PLATE_SIZE: () => (/* binding */ GET_PLATE_SIZE),\n/* harmony export */   GET_STATE: () => (/* binding */ GET_STATE),\n/* harmony export */   GET_UNUSED_PARTS_OF_PLATE: () => (/* binding */ GET_UNUSED_PARTS_OF_PLATE),\n/* harmony export */   GET_UNUSED_SPACE_ITEM: () => (/* binding */ GET_UNUSED_SPACE_ITEM),\n/* harmony export */   GET_UNUSED_SPACE_LENGTH: () => (/* binding */ GET_UNUSED_SPACE_LENGTH),\n/* harmony export */   GET_USED_PARTS: () => (/* binding */ GET_USED_PARTS),\n/* harmony export */   INITIAL_STATE: () => (/* binding */ INITIAL_STATE),\n/* harmony export */   IS_CUT: () => (/* binding */ IS_CUT),\n/* harmony export */   NEXT_INDEX_PLATE: () => (/* binding */ NEXT_INDEX_PLATE),\n/* harmony export */   PREPARE_CONFIG_DATA: () => (/* binding */ PREPARE_CONFIG_DATA),\n/* harmony export */   PUSH_NEW_PLATE: () => (/* binding */ PUSH_NEW_PLATE),\n/* harmony export */   REMOVE_NOT_NEEDED_IN_PLATE: () => (/* binding */ REMOVE_NOT_NEEDED_IN_PLATE),\n/* harmony export */   REVERSE_UNUSED_SPACE: () => (/* binding */ REVERSE_UNUSED_SPACE),\n/* harmony export */   SELECT_ITEMS_OF_LAST_PART: () => (/* binding */ SELECT_ITEMS_OF_LAST_PART),\n/* harmony export */   SET_NEW_SIZE_PLATE: () => (/* binding */ SET_NEW_SIZE_PLATE),\n/* harmony export */   SET_NEW_UNUSED_SPACE: () => (/* binding */ SET_NEW_UNUSED_SPACE),\n/* harmony export */   UPDATE_PARTS_INFO_IN_PLATE: () => (/* binding */ UPDATE_PARTS_INFO_IN_PLATE),\n/* harmony export */   UPDATE_PART_NAME: () => (/* binding */ UPDATE_PART_NAME),\n/* harmony export */   VALIDATE_CONFIG_DATA: () => (/* binding */ VALIDATE_CONFIG_DATA)\n/* harmony export */ });\n//prepare data\r\nconst VALIDATE_CONFIG_DATA = 'VALIDATE_CONFIG_DATA'\r\nconst GET_STATE = 'GET_STATE'\r\nconst PREPARE_CONFIG_DATA = 'PREPARE_CONFIG_DATA'\r\nconst EXTRACT_PARTS = 'EXTRACT_PARTS'\r\nconst CALC_SIZE = 'CALC_SIZE'\r\nconst CALC_SIZE_STEP = 'CALC_SIZE_STEP'\r\nconst CALC_COUNT_PART = 'CALC_COUNT_PART'\r\n\r\n//calculate\r\nconst CREATE_NEW_PLATE = 'CREATE_NEW_PLATE'\r\nconst PUSH_NEW_PLATE = 'PUSH_NEW_PLATE'\r\nconst CALC_CURRENT_SIZE = 'CALC_CURRENT_SIZE'\r\nconst SET_NEW_SIZE_PLATE = 'SET_NEW_SIZE_PLATE'\r\nconst GET_CURRENT_INDEX_PLATE = 'GET_CURRENT_INDEX_PLATE'\r\nconst FIND_UNUSED_SPACE = 'FIND_UNUSED_SPACE'\r\nconst INITIAL_STATE = 'INITIAL_STATE'\r\nconst IS_CUT = 'IS_CUT'\r\nconst GET_PARTS_LENGTH = 'GET_PARTS_LENGTH'\r\nconst GET_MAX_X1 = 'GET_MAX_X1'\r\nconst REVERSE_UNUSED_SPACE = 'REVERSE_UNUSED_SPACE'\r\nconst GET_UNUSED_SPACE_LENGTH = 'GET_UNUSED_SPACE_LENGTH'\r\nconst GET_UNUSED_SPACE_ITEM = 'GET_UNUSED_SPACE_ITEM'\r\nconst GET_PART_ITEM = 'GET_PART_ITEM'\r\nconst ADD_ITEM_TO_PLATE = 'ADD_ITEM_TO_PLATE'\r\nconst CHANGE_ITEM_TO_PLATE = 'CHANGE_ITEM_TO_PLATE'\r\nconst FILL_RECT = 'FILL_RECT'\r\nconst DELETE_PART_ITEM = 'DELETE_PART_ITEM'\r\nconst GET_PLATE_ITEMS_LENGTH = 'GET_PLATE_ITEMS_LENGTH'\r\nconst GET_PLATES_LENGTH = 'GET_PLATES_LENGTH'\r\nconst NEXT_INDEX_PLATE = 'NEXT_INDEX_PLATE'\r\nconst SET_NEW_UNUSED_SPACE = 'SET_NEW_UNUSED_SPACE'\r\nconst SELECT_ITEMS_OF_LAST_PART = 'SELECT_ITEMS_OF_LAST_PART'\r\nconst GET_PLATE_ITEM = 'GET_PLATE_ITEM'\r\nconst DELETE_PLATE_ITEM = 'DELETE_PLATE_ITEM'\r\nconst GET_PLATE_SIZE = 'GET_PLATE_SIZE'\r\nconst UPDATE_PART_NAME = 'UPDATE_PART_NAME'\r\nconst UPDATE_PARTS_INFO_IN_PLATE = 'UPDATE_PARTS_INFO_IN_PLATE'\r\nconst DELETE_LAST_PLATE = 'DELETE_LAST_PLATE'\r\nconst DIVIDER = 'DIVIDER'\r\nconst DIVISION_OF_PRODUCTS = 'DIVISION_OF_PRODUCTS'\r\nconst BASIC_POSITIONING = 'BASIC_POSITIONING'\r\nconst GET_OPTIMIZATION_LEVEL = 'GET_OPTIMIZATION_LEVEL'\r\nconst ADD_STATISTIC = 'ADD_STATISTIC'\r\nconst GET_CONFIG_DATA = 'GET_CONFIG_DATA'\r\nconst GET_USED_PARTS = 'GET_USED_PARTS'\r\nconst GET_CURRENT_SIZE = 'GET_CURRENT_SIZE'\r\nconst REMOVE_NOT_NEEDED_IN_PLATE = 'REMOVE_NOT_NEEDED_IN_PLATE'\r\nconst GET_UNUSED_PARTS_OF_PLATE = 'GET_UNUSED_PARTS_OF_PLATE'\n\n//# sourceURL=webpack://cutting/./src/js/store/actions.js?")},"./src/js/store/dispatch.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store */ "./src/js/store/store.js");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions */ "./src/js/store/actions.js");\n/* harmony import */ var _functions_validation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../functions/validation */ "./src/js/functions/validation.js");\n/* harmony import */ var _functions_prepareConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../functions/prepareConfig */ "./src/js/functions/prepareConfig.js");\n/* harmony import */ var _functions_extractParts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../functions/extractParts */ "./src/js/functions/extractParts.js");\n/* harmony import */ var _functions_calcCurrentSize__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../functions/calcCurrentSize */ "./src/js/functions/calcCurrentSize.js");\n/* harmony import */ var _functions_findUnusedSpace__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../functions/findUnusedSpace */ "./src/js/functions/findUnusedSpace.js");\n/* harmony import */ var _functions_createNewPlate__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../functions/createNewPlate */ "./src/js/functions/createNewPlate.js");\n/* harmony import */ var _functions_selectItemsOfLastPart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../functions/selectItemsOfLastPart */ "./src/js/functions/selectItemsOfLastPart.js");\n/* harmony import */ var _functions_updatePartName__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../functions/updatePartName */ "./src/js/functions/updatePartName.js");\n/* harmony import */ var _functions_divider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../functions/divider */ "./src/js/functions/divider.js");\n/* harmony import */ var _functions_divisionOfProducts__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../functions/divisionOfProducts */ "./src/js/functions/divisionOfProducts.js");\n/* harmony import */ var _actionCreators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./actionCreators */ "./src/js/store/actionCreators.js");\n/* harmony import */ var _functions_basicPositioning__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../functions/basicPositioning */ "./src/js/functions/basicPositioning.js");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction dispatch(action) {\r\n  const state = _store__WEBPACK_IMPORTED_MODULE_0__["default"].getState(),\r\n    cnf = state.config\r\n\r\n  const getIndexPLate = () => action.plate >= 0 ? action.plate : state.currentIndexPlate\r\n\r\n  switch (action.type) {\r\n    //region PREPARE DATA\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.INITIAL_STATE: {\r\n      //инициализация стейта\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].init()\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_STATE: {\r\n      //инициализация стейта\r\n      return state\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.VALIDATE_CONFIG_DATA: {\r\n      //валидация\r\n      _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({errors: (0,_functions_validation__WEBPACK_IMPORTED_MODULE_2__["default"])(action.config)})\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].getErrors()\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.PREPARE_CONFIG_DATA: {\r\n      //подготовить данные конфига\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({config: (0,_functions_prepareConfig__WEBPACK_IMPORTED_MODULE_3__["default"])(action.config)})\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.EXTRACT_PARTS: {\r\n      //извлечь изделия с некоторыми преобразованиями\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState(\r\n        {parts: (0,_functions_extractParts__WEBPACK_IMPORTED_MODULE_4__["default"])(cnf.parts, cnf.name, cnf.length, cnf.partName, cnf.nameIsPrefix, cnf.minPart)})\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_SIZE: {\r\n      //основной размер с которым работаем\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({size: cnf.axisX ? cnf.length : cnf.height})\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_SIZE_STEP: {\r\n      //кратность листа в линейном выражении\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({sizeStep: state.size * cnf.step})\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_COUNT_PART: {\r\n      //оно всегда будет очень близко к нужному. на всякий случай\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({countPart: Math.round(state.size / state.sizeStep)})\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_CONFIG_DATA: {\r\n      //данные конфига\r\n      return cnf.hasOwnProperty(action.key) ? cnf[action.key] : cnf\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_CURRENT_SIZE: {\r\n      //текущий используемый размер\r\n      return state.size || null\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.ADD_STATISTIC: {\r\n      //добавить статистику\r\n      if (typeof action.obj !== \'object\') throw new Error(\'object error\')\r\n\r\n      const statistic = {\r\n        ...state.statistic,\r\n        ...action.obj\r\n      }\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({statistic})\r\n    }\r\n    //endregion PREPARE DATA\r\n\r\n    //region CALCULATE\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.IS_CUT: {\r\n      //делить иделия?\r\n      return cnf.cut\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.DIVIDER: {\r\n      return (0,_functions_divider__WEBPACK_IMPORTED_MODULE_10__.divider)(\r\n        state.plates,\r\n        cnf.minPart,\r\n        cnf.rotate,\r\n        cnf.maxStack,\r\n        state.symbols.divide,\r\n        action.items,\r\n        cnf.length,\r\n        state.symbols.unusedSpace\r\n      )\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.BASIC_POSITIONING: {\r\n      return (0,_functions_basicPositioning__WEBPACK_IMPORTED_MODULE_13__["default"])(\r\n        cnf.rotate,\r\n        state.maxIteration,\r\n        cnf.length,\r\n        cnf.axisX\r\n      )\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.DIVISION_OF_PRODUCTS: {\r\n      return (0,_functions_divisionOfProducts__WEBPACK_IMPORTED_MODULE_11__["default"])(\r\n        state.sizeStep,\r\n        state.maxIteration,\r\n        cnf.height,\r\n        state.symbols.unusedSpace,\r\n        state.config.showPartInName\r\n      )\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.PUSH_NEW_PLATE: {\r\n      //пушим новый лист\r\n      return _store__WEBPACK_IMPORTED_MODULE_0__["default"].setState({plates: [...state.plates, action.plate]})\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.CREATE_NEW_PLATE: {\r\n      //создать новый лист\r\n      return (0,_functions_createNewPlate__WEBPACK_IMPORTED_MODULE_7__["default"])(\r\n        state.plates,\r\n        state.size,\r\n        cnf.length,\r\n        cnf.height,\r\n        state.symbols.startSpace,\r\n        state.symbols.unusedSpace\r\n      )\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.CALC_CURRENT_SIZE: {\r\n      //текущий используемый размер листа\r\n      return (0,_functions_calcCurrentSize__WEBPACK_IMPORTED_MODULE_5__["default"])(action.size, state.sizeStep, action.mode)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.SET_NEW_SIZE_PLATE: {\r\n      //изменить длину листа\r\n      if (typeof action.cb !== \'function\') throw new Error(\'cb is not a function\')\r\n\r\n      const size = state.plates[action.plate].size = action.size\r\n      action.cb()\r\n      ;(0,_actionCreators__WEBPACK_IMPORTED_MODULE_12__.findUnusedSpaceAC)(action.plate)\r\n      return size\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_CURRENT_INDEX_PLATE: {\r\n      //лист над которым работаем\r\n      return state.currentIndexPlate\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.FIND_UNUSED_SPACE: {\r\n      //поиск неиспользуемых пространств на листе\r\n      return (0,_functions_findUnusedSpace__WEBPACK_IMPORTED_MODULE_6__["default"])(\r\n        cnf.minPart,\r\n        state.plates,\r\n        cnf.axisX,\r\n        state.symbols,\r\n        action.index,\r\n        action.divideMode\r\n      )\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_OPTIMIZATION_LEVEL: {\r\n      //уровень оптимизации\r\n      return cnf.optimization\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PARTS_LENGTH: {\r\n      return state.parts.length\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PART_ITEM: {\r\n      return {...state.parts[action.item]}\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_MAX_X1: {\r\n      return Math.max(...state.plates[getIndexPLate()].items.map(e => e.x + e.w), 0)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_USED_PARTS: {\r\n      let size\r\n\r\n      if (state.plates[action.plate].size === state.size) {\r\n        let maxUnused = 0\r\n        state.plates[action.plate].unusedSpace.forEach(e => {\r\n          if (state.axisX && e.h === cnf.height && maxUnused < e.x) {\r\n            maxUnused = e.x\r\n          } else if (!state.axisX && e.w === cnf.width && maxUnused < e.y) {\r\n            maxUnused = e.y\r\n          }\r\n        })\r\n        size = (0,_actionCreators__WEBPACK_IMPORTED_MODULE_12__.calcCurrentSizeAC)(maxUnused === 0 ? state.size : maxUnused, \'ceil\')\r\n      } else {\r\n        size = state.plates[action.plate].size\r\n      }\r\n\r\n      return Math.round(size / state.sizeStep)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.REVERSE_UNUSED_SPACE: {\r\n      return state.plates[getIndexPLate()].unusedSpace.reverse()\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_UNUSED_SPACE_LENGTH: {\r\n      return state.plates[getIndexPLate()].unusedSpace.length\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_UNUSED_SPACE_ITEM: {\r\n      return {...state.plates[getIndexPLate()].unusedSpace[action.item]}\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.ADD_ITEM_TO_PLATE: {\r\n      const {x, w, y, h, rotate, fromPlate: index} = action.item\r\n      ;(0,_actionCreators__WEBPACK_IMPORTED_MODULE_12__.fillRectAC)({x, w, y, h, rotate, index})\r\n      return state.plates[action.plateIdx].items.push(action.item)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.CHANGE_ITEM_TO_PLATE: {\r\n      //если вдруг кто-то решит изменить то что нельзя\r\n      [\'x\', \'w\', \'y\', \'h\', \'rotate\', \'fromPlate\', \'id\', \'height\', \'length\', \'count\', \'part\', \'parts\', \'name\', \'hem\', \'edge\']\r\n        .forEach(e => {\r\n        if (action.data.hasOwnProperty(e)) {\r\n          delete action.data[e]\r\n          console.warn(`key ${e} is forbidden`)\r\n        }\r\n      })\r\n\r\n      return state.plates[action.plateIdx].items[action.item] = {\r\n        ...state.plates[action.plateIdx].items[action.item],\r\n        ...action.data\r\n      }\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.FILL_RECT: {\r\n      //добавить прямоугольник в матрицу\r\n      let {\r\n        x, y, w, h,\r\n        index: index = state.currentIndexPlate,\r\n        value: value = 1,\r\n        rotate: rotate = false\r\n      } = action.param\r\n\r\n      if (rotate) [w, h] = [h, w]\r\n\r\n      for (let x1 = x; x1 < w + x; x1++) {\r\n        for (let y1 = y; y1 < h + y; y1++) {\r\n          state.plates[index].matrix[y1][x1] = value\r\n        }\r\n      }\r\n      return\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.DELETE_PART_ITEM: {\r\n      return state.parts.splice(action.index, 1)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATE_ITEMS_LENGTH: {\r\n      return state.plates[getIndexPLate()].items.length\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATES_LENGTH: {\r\n      return state.plates.length\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.NEXT_INDEX_PLATE: {\r\n      return ++state.currentIndexPlate\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.SET_NEW_UNUSED_SPACE: {\r\n      return state.plates[getIndexPLate()].unusedSpace = action.value\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATE_ITEM: {\r\n      return {...state.plates[action.plateIdx].items[action.itemIdx]}\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.DELETE_PLATE_ITEM: {\r\n      return state.plates[action.plateIdx].items.splice(action.itemIdx, 1)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_PLATE_SIZE: {\r\n      return state.plates[action.plateIdx].size\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.SELECT_ITEMS_OF_LAST_PART: {\r\n      return (0,_functions_selectItemsOfLastPart__WEBPACK_IMPORTED_MODULE_8__["default"])(state.size, state.sizeStep, state.countPart, action.index, cnf.axisX)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.UPDATE_PART_NAME: {\r\n      return (0,_functions_updatePartName__WEBPACK_IMPORTED_MODULE_9__["default"])(cnf.partName, action.partItemOrName, action.part)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.DELETE_LAST_PLATE: {\r\n      return state.plates.splice(-1)\r\n    }\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.UPDATE_PARTS_INFO_IN_PLATE: {\r\n      let count = action.startPart\r\n      cancel: for (let i in state.plates) {\r\n        for (let j in state.plates[i].items) {\r\n          const item = state.plates[i].items[j]\r\n          if (item.id === action.id) {\r\n            ++count\r\n            state.config.showPartInName && (item.name = (0,_actionCreators__WEBPACK_IMPORTED_MODULE_12__.updatePartNameAC)(item, count))\r\n            item.part = count\r\n            item.parts = action.parts\r\n            if (count === action.parts) break cancel\r\n          }\r\n        }\r\n      }\r\n      return\r\n    }\r\n    //endregion CALCULATE\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.REMOVE_NOT_NEEDED_IN_PLATE: {\r\n      return state.plates = state.plates.map(plate => plate.items)\r\n    }\r\n\r\n    case _actions__WEBPACK_IMPORTED_MODULE_1__.GET_UNUSED_PARTS_OF_PLATE: {\r\n      const max = Math.max(...state.plates[action.plateIndex].items.map(item => {\r\n        return cnf.axisX ? item.x + item.w : item.y + item.h\r\n      }))\r\n\r\n      return (0,_actionCreators__WEBPACK_IMPORTED_MODULE_12__.calcCurrentSizeAC)(max, \'ceil\')\r\n    }\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dispatch);\n\n//# sourceURL=webpack://cutting/./src/js/store/dispatch.js?')},"./src/js/store/store.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst initialState = {\r\n  config: {},\r\n  parts: [],\r\n  plates: [],\r\n  errors: null,\r\n  currentIndexPlate: 0,\r\n  symbols: {\r\n    unusedSpace: 0,\r\n    rect: 1,\r\n    startSpace: 2,\r\n    alternateSpace: 3,\r\n    divide: 4\r\n  },\r\n  statistic: {},\r\n  sizeStep: null,\r\n  countPart: null,\r\n  maxIteration: 100 //максимальное количество итераций в цикле while\r\n}\r\n\r\nconst store = {\r\n  _state: {\r\n  },\r\n\r\n  init() {\r\n    this._state = initialState\r\n  },\r\n\r\n  getState() {\r\n    return this._state\r\n  },\r\n\r\n  getErrors() {\r\n    return {\r\n      errors: this._state.errors\r\n    }\r\n  },\r\n\r\n  setState(data) {\r\n    this._state = {...this._state, ...data}\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (store);\n\n//# sourceURL=webpack://cutting/./src/js/store/store.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,_)=>{for(var t in _)__webpack_require__.o(_,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:_[t]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/js/index.js");